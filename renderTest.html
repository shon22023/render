<html>
<body>

<input type="file" id="videoInput" />
<button id="send">送信</button>

<video id="result" controls></video>

<script>
const input = document.getElementById("videoInput");
const button = document.getElementById("send");
const result = document.getElementById("result");

button.onclick = async () => {
  const file = input.files[0];
  if (!file) return alert("動画を選んで");
  console.log("fileが選択されました！！");
  console.log("file:", file);

  const formData = new FormData();
  formData.append("video", file);

  const res = await fetch("https://render-g2nd.onrender.com/uploadVideo", {
    method: "POST",
    body: formData
  });

  if (!res.ok) {
    console.error("動画のuploadに失敗しました！！", res.status);
    console.error("res:", res);
    return;
  } else {
    console.log("動画のアップロードに成功しました！！");
    console.log("res:", res);
  }

  const blob = await res.blob();
  result.src = URL.createObjectURL(blob);
  console.log("blob:", blob);
};
</script>

</body>
</html>
